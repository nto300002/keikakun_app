# ケイカくん フィードバック課題リスト

## 📋 概要
フィードバックに基づく改善課題の一覧

---

## 🔐 1. 認証・セキュリティ関連

### 1.1 ログイン画面

#### 🔴 高優先度

**エラーメッセージの日本語化**
- **現状**: `Incorrect email or password` が英語で表示
- **課題**: ユーザーが理解しづらい
- **対応**: 全てのエラーメッセージを日本語化
  - 例: `メールアドレスまたはパスワードが正しくありません`

**ログイン保持時間の明示**
- **現状**: 「ログイン状態を保持(8時間)」のチェックを外した場合のログアウト時間が不明
- **課題**: ユーザーがセキュリティポリシーを理解できない
- **対応**: 
  - チェックなしの場合のセッション時間を決定
  - UIに明示（例: チェックなし = 30分後に自動ログアウト）
  - ツールチップやヘルプテキストで説明

### 1.2 サインアップ画面

#### 🔴 高優先度

**利用規約・プライバシーポリシーのリンク**
- **現状**: リンクをクリックしても開かない（未実装）
- **課題**: 法的要件を満たせない
- **対応**: 
  - 利用規約ページの作成
  - プライバシーポリシーページの作成
  - リンクの実装

### 1.3 2段階認証

#### 🟡 中優先度

**2段階認証の必須化解除**
- **現状**: アカウント作成時に2段階認証を使用しないとアカウントが作成できない
- **課題**: ユーザーの選択肢がない
- **対応**: 
  - 2段階認証を任意にする
  - セキュリティレベルの選択肢を提供

**2段階認証の無効化機能**
- **現状**: 一度有効にすると無効化できない
- **課題**: ユーザーの柔軟性がない
- **対応**: 
  - プロフィール画面に「2段階認証を無効化」ボタンを追加
  - 無効化時の確認ダイアログ実装

---

## 📊 2. ダッシュボード関連

### 2.1 ネーミング・用語

#### 🟡 中優先度

**「ダッシュボード」の名称変更**
- **現状**: 「ダッシュボード」という開発者向けの名称
- **課題**: 一般ユーザーにとってわかりにくい
- **対応案**: 
  - 「管理画面」
  - 「ホーム」
  - 「概要」
- **検討**: ユーザーテストで最適な名称を決定

**事業者名の表示改善**
- **現状**: `test_11` のように事業者名が表示されているが、ラベルがない
- **課題**: 何の情報か分かりにくい
- **対応**: 
  - 「事業者名：」というラベルを追加
  - または「◯◯事業所」のように明示的な表示

### 2.2 UI/UXの改善

#### 🔴 高優先度

**日付表示の拡大**
- **現状**: 期限切れ・期限間近カードの日付表示が小さい
- **課題**: 視認性が悪い
- **対応**: 
  - フォントサイズを拡大
  - 重要な情報なので目立つデザインに

**レイアウトバランスの調整**
- **現状**: 「期限切れ」「期限間近」のカードが大きく、「利用者一覧」が小さい
- **課題**: 使用頻度の高い「利用者一覧」にアクセスしづらい
- **対応**: 
  - 「利用者一覧」セクションを拡大
  - 上部の警告カードをよりコンパクトに

#### 🟡 中優先度

**切り替えボタンのデザイン改善**
- **現状**: 「利用者名で検索」の切り替えボタンが視覚的にボタンだと分かりにくい
- **課題**: 操作性が悪い
- **対応**: 
  - トグルスイッチデザインに変更
  - ボタンらしい視覚的手がかりを追加

**名前によるソート機能の追加**
- **現状**: 名前でのソート機能がない
- **課題**: 利用者が多い場合に検索しづらい
- **対応**: 
  - 「氏名」カラムにソート機能を追加
  - 昇順・降順の切り替え

**利用者数増加時の表示**
- **現状**: 利用者が増えた場合の表示方法が不明
- **課題**: スケーラビリティの懸念
- **対応検討**: 
  - ページネーション実装
  - 無限スクロール
  - 「さらに表示」ボタン

### 2.3 通知機能

#### 🟢 低優先度

**通知ベルマークの実装**
- **現状**: ベルマークが動いていない（未実装）
- **課題**: 通知機能が使えない
- **対応**: 
  - 通知機能の実装
  - 未読通知数の表示
  - 通知一覧ページ

---

## 👤 3. プロフィール関連

### 3.1 パスワード変更

#### 🔴 高優先度

**パスワード変更機能の実装**
- **現状**: パスワード変更画面が動作しない（未実装）
- **課題**: 基本的なセキュリティ機能が使えない
- **対応**: 
  - パスワード変更APIの実装
  - バリデーション実装
  - 変更完了通知メール送信

### 3.2 フィードバック機能

#### 🟡 中優先度

**フィードバック対象の明示**
- **現状**: フィードバック機能の対象が不明確
- **課題**: ユーザーが何についてフィードバックすべきか分からない
- **対応**: 
  - 「けいかくんに関してご意見・ご要望があれば...」のような明確な文言に変更
  - フィードバックの目的を明示

**フィードバック機能の配置検討**
- **現状**: プロフィール内にフィードバック機能がある
- **課題**: 一般的な配置かどうか不明（判断が難しいとコメント）
- **対応検討**: 
  - ヘッダーメニューに配置
  - フッターに配置
  - サイドバーに配置
  - 他サービスのベストプラクティスを調査

### 3.3 通知設定

#### 🟡 中優先度

**保存機能の実装**
- **現状**: 通知設定の保存が動作しない
- **課題**: 設定が保存できない
- **対応**: 
  - 保存APIの実装
  - 保存成功・失敗のフィードバック表示

**通知ロール切り替えの説明**
- **現状**: 通知ロール切り替えの具体的な運用が不明
- **課題**: ユーザーが機能を理解できない
- **対応**: 
  - 機能の説明文を追加
  - ツールチップで詳細説明
  - ヘルプドキュメントの作成

**通知設定の配置検討**
- **現状**: プロフィール内に通知設定がある
- **課題**: 一般的な配置かどうか不明（判断が難しいとコメント）
- **対応検討**: 
  - 独立した「設定」ページを作成
  - 他サービスのベストプラクティスを調査

---

## 📝 4. 利用者登録関連

### 4.1 エラー処理

#### 🔴 高優先度

**エラーメッセージの日本語化**
- **現状**: バリデーションエラーが英語で表示
  ```
  relationship: String should have at least 1 character applicationStatus: 
  Input should be 'acquired', 'applying', 'planning', 'not_applicable'
  ```
- **課題**: ユーザーが理解できない
- **対応**: 
  - 全てのバリデーションエラーを日本語化
  - フィールドごとに適切な日本語メッセージを定義
  - 例: 「続柄を入力してください」「申請状況を選択してください」

**エラー箇所の明示**
- **現状**: 「登録完了を押したが、登録ができなかった。どこが悪いのか不明」
- **課題**: ユーザーが修正箇所を特定できない
- **対応**: 
  - エラーのあるフィールドにスクロール
  - エラーフィールドを赤枠で強調
  - エラーフィールドの近くにエラーメッセージを表示

---

## 📊 優先度別サマリー

### 🔴 高優先度（即時対応）

1. **エラーメッセージの日本語化**（全画面）
   - ログイン画面
   - 利用者登録画面
   - その他全ての画面

2. **利用規約・プライバシーポリシーの実装**
   - 法的要件として必須

3. **パスワード変更機能の実装**
   - 基本的なセキュリティ機能

4. **エラー箇所の明示改善**
   - ユーザビリティの基本

5. **ダッシュボードのUI改善**
   - 日付表示の拡大
   - レイアウトバランスの調整

### 🟡 中優先度（次回リリース）

1. **2段階認証の柔軟化**
   - 任意化
   - 無効化機能

2. **ダッシュボードの名称変更**
   - ユーザーテストの実施

3. **ソート・フィルタ機能の追加**

4. **通知設定・フィードバック機能の実装**

5. **UI配置の再検討**
   - フィードバック機能
   - 通知設定

### 🟢 低優先度（将来的に）

1. **通知ベルマークの実装**

2. **ログイン保持時間の詳細設定**

---

## 🛠️ 技術的な対応方針

### エラーメッセージの日本語化

**フロントエンド側**
```typescript
// i18n設定を追加
export const errorMessages = {
  auth: {
    incorrectCredentials: 'メールアドレスまたはパスワードが正しくありません',
    // ...
  },
  validation: {
    required: '{field}を入力してください',
    minLength: '{field}は{min}文字以上で入力してください',
    // ...
  }
}
```

**バックエンド側**
```python
# app/core/exceptions.py
class ErrorMessages:
    INCORRECT_CREDENTIALS = "メールアドレスまたはパスワードが正しくありません"
    # ...

# app/schemas/validators.py
from pydantic import Field, field_validator

class WelfareRecipientCreate(BaseModel):
    relationship: str = Field(
        ..., 
        min_length=1,
        description="続柄",
        json_schema_extra={"error_messages": {
            "required": "続柄を入力してください",
            "min_length": "続柄は1文字以上で入力してください"
        }}
    )
```

### エラー表示の改善

**フロントエンド側**
```typescript
// エラーフィールドへのスクロール
const scrollToError = (fieldName: string) => {
  const element = document.querySelector(`[name="${fieldName}"]`);
  element?.scrollIntoView({ behavior: 'smooth', block: 'center' });
};

// エラーフィールドの強調
<Input
  error={errors.relationship}
  helperText={errors.relationship?.message}
  className={errors.relationship ? 'border-red-500' : ''}
/>
```

---

## 📅 実装スケジュール案

### Week 1-2: 高優先度対応
- [ ] エラーメッセージの日本語化（全画面）
- [ ] エラー表示の改善
Prifile.tsx
k_front/components/notice/NotificationsTab.tsx
handle関数に例外処理: エラーメッセージ
同ページ内での処理


      {/* 成功メッセージ */}
      {successMessage && (
        <div className="fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50">
          {successMessage}
        </div>
      )}

      {/* エラーメッセージ */}
      {error && (
        <div className="fixed top-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-50">
          <div className="flex items-center justify-between">
            <span>{error}</span>
            <button onClick={() => setError(null)} className="ml-4 text-white hover:text-gray-200">
              ×
            </button>
          </div>
        </div>
      )}
- [ ] 利用規約・プライバシーポリシーページの作成

### Week 3-4: 高優先度対応（続き）
### 認証
ログイン時間の保持: 1,2時間
### ダッシュボード
- ダッシュボードの名前 期限を一番左: 期限が迫っている順に並べる
- 期限切れなど　高さ調整
- 氏名並び替え
- 事務所: {事務所名: office_name} <事務所名の隣に 事務所名: という言葉をつける>
### 通知
- "すべて" 一番左へ
- 作成した利用者名の氏名が見えるように
- 既読/未読を中身を見れば自動で既読になるように -> 通知の詳細ページ実装
- [ ] ダッシュボードUI改善
  - [ ] 日付表示の拡大
  - [ ] レイアウト調整
  - [ ] 事業者名ラベル追加

### Week 5-6: 中優先度対応
- [ ] 2段階認証の柔軟化
- [ ] ソート・フィルタ機能
- [ ] 通知設定・フィードバック機能

### Week 7-8: 中優先度対応（続き）& テスト
- [ ] UI配置の再検討と実装
- [ ] 総合テスト
- [ ] ユーザーテスト

---

## 🎯 KPI

### ユーザビリティ改善の指標

1. **エラー発生時の完了率**
   - 目標: エラー発生後の登録完了率を50%以上向上

2. **問い合わせ削減**
   - 目標: UI関連の問い合わせを30%削減

3. **タスク完了時間**
   - 目標: 利用者登録の平均完了時間を20%短縮

4. **ユーザー満足度**
   - 目標: NPS（Net Promoter Score）を向上

---

## 📝 備考

### 検討が必要な項目

1. **ダッシュボードの名称**
   - ユーザーテストで最適な名称を決定
   - 候補: 管理画面、ホーム、概要

2. **機能配置の再検討**
   - フィードバック機能
   - 通知設定
   - 他サービスのベストプラクティス調査

3. **ログイン保持時間**
   - セキュリティポリシーの策定
   - チェックなしの場合の標準時間決定

### 今後のフィードバックセッション

- 月次でのレビュー会実施
- ユーザーテストの定期実施
- 継続的な改善サイクルの確立